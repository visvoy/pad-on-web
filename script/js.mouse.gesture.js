(function(k,l){function u(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function E(a,b,c,e,d,f){if("object"==typeof a){var m,k,h;e-=b;var n=d-c,p=Math.sqrt(e*e+n*n);for(d=0;d<p;d++)m=d/p,k=parseInt(b+e*m),m=parseInt(c+n*m),h=l.createElement("div"),h.id=g.prefix+"motionline"+Math.random(),h.onselectstart=function(){return!1},h.style.cssText="top:"+m+"px;left:"+k+"px;position:absolute;z-index:999999;width:2px;height:2px;font-size:2px;background-color:"+
f+";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none",a.appendChild(h),y.push(h.id)}}function F(a){var b,c=[];for(b in a)c[b]=a[b];k.setTimeout(function(){for(;b=c.pop();)(b="string"==typeof b?l.getElementById(b):b)&&b.parentNode.removeChild(b)},680)}function z(){if(p){var a=h-r,b=n-s;0>a&&(a*=-1);0>b&&(b*=-1);if(a>g.tolerance||b>g.tolerance){var c;c="nil";var e=h-r,d=s-n;e<g.tolerance&&e>-1*g.tolerance&&(e=0);d<g.tolerance&&d>-1*g.tolerance&&
(d=0);if(0!=e&&0!=d){var q=e,m=d;0>q&&(q*=-1);0>m&&(m*=-1);q>m?m<0.5*q&&(d=0):q<0.5*m&&(e=0)}0!=e&&0!=d?c=0<e?0<d?"NE":"SE":0<d?"NW":"SW":0!=e?c=0<e?"E":"W":0!=d&&(c=0<d?"N":"S");"nil"!=c&&(e=E,d=("string"==typeof l?l.getElementById(l):l).getElementsByTagName("body"),"object"==typeof d&&"object"==typeof d[0]?d=d[0]:(console.log("document.body not exist!"),d=!1),e(d,r,s,h,n,g.trailColor),r=h,s=n,0==f.length?f[f.length]={d:c,x:a,y:b}:c!=f[f.length-1].d?f[f.length]={d:c,x:a,y:b}:(f[f.length-1].x+=a,
f[f.length-1].y+=b))}k.setTimeout(z,g.captureSpeed)}}function A(a){k.clearTimeout(B);if(p){p=!1;for(a=0;a<v.length;a++)v[a](f);g.showTrail&&F(y)}}var h=0,n=0,C=0,D=0,r=0,s=0,p=!1,B=null,w=[],v=[],y=[],f,x=!0,G=!!k.ActiveXObject,g={prefix:"gesture",tolerance:25,mouseButton:"left",startEvent:"mousedown",endEvent:"mouseup",captureSpeed:50,showTrail:!1,trailColor:"#00cc00",eventLimit:5E3},t={config:function(a,b){if("undefined"==typeof a)return g;if("object"!=typeof a){var c={};c[a]=b;a=c}for(c in a)"didStartCapture"==
c?t.didStartCapture(a[c]):"didCaptureGesture"==c?t.didCaptureGesture(a[c]):g[c]=a[c]},didStartCapture:function(a){w.push(a)},didCaptureGesture:function(a){v.push(a)},enable:function(a){x=a?!0:!1},enabled:function(){return x},init:function(a){"object"==typeof a&&t.config(a);u(l,"mousemove",function(b){if(b.pageX||b.pageY)h=parseInt(b.pageX,10),n=parseInt(b.pageY,10);else if(b.clientX||b.clientY)h=b.clientX+l.body.scrollLeft+l.documentElement.scrollLeft,n=b.clientY+l.body.scrollTop+l.documentElement.scrollTop});
u(l,g.startEvent,function(b){if(x&&!p){var a=0,e=G?{1:"left",2:"right",4:"middle"}:{0:"left",2:"right",1:"middle"};"undefined"!=typeof b.button&&(a=b.button);if("undefined"!=typeof e[a]&&e[a]==g.mouseButton){p=!0;C=h;D=n;B=k.setTimeout(A,g.eventLimit);for(b=0;b<w.length;b++)w[b](C,D);r=h;s=n;f=[];z()}}return!1});u(l,g.endEvent,function(a){A(a);return!1})}};k.js||(k.js={});k.js.mouse||(k.js.mouse={});k.js.mouse.gesture||(k.js.mouse.gesture=t)})(window,document);
